var n=document.querySelector(".container"),t=[["","","",""],["","","",""],["","","",""],["","","",""]],r=!1,e=!1,a=!1,o=!1,c=0;function l(){var s='\n    <div class="game-header">\n      <h1>2048</h1>\n      <div class="controls">\n        <p class="info">\n          Score: <span class="game-score">'.concat(c,'</span>\n        </p>\n        <button\n          class="button ').concat(r?"restart":"start",'"\n        ><span>').concat(r?"Restart":"Start","</span></button>\n      </div>\n    </div>\n  "),i='\n    <table class="game-field">\n      <tbody>\n        <tr class="field-row">\n        '.concat(t[0].map(function(n){return'<td class="field-cell field-cell--'.concat(n,'">').concat(n,"</td>")}).join(""),'\n        </tr>\n\n        <tr class="field-row">\n          ').concat(t[1].map(function(n){return'<td class="field-cell field-cell--'.concat(n,'">').concat(n,"</td>")}).join(""),'\n        </tr>\n\n        <tr class="field-row">\n          ').concat(t[2].map(function(n){return'<td class="field-cell field-cell--'.concat(n,'">').concat(n,"</td>")}).join(""),'\n        </tr>\n\n        <tr class="field-row">\n          ').concat(t[3].map(function(n){return'<td class="field-cell field-cell--'.concat(n,'">').concat(n,"</td>")}).join(""),"\n        </tr>\n      </tbody>\n    </table>\n  "),f='\n    <div class="message-container">\n      <p class="message message-lose '.concat(a?o?"hidden":"":"hidden",'">You lose! Restart the game?</p>\n      <p class="message message-win ').concat(a&&o?"":"hidden",'">Winner! Congrats! You did it!</p>\n      <p class="message message-start" ').concat(e?"hidden":"",'>\n        Press "Start" to begin game. Good luck!\n      </p>\n    </div>\n  ');n.innerHTML="".concat(s).concat(i).concat(f),n.querySelector(".button").addEventListener("click",function n(){if(r){v(),c=0,r=!1,a=!1,o=!1,n();return}e&&v(),e=!0,c=0,g(),g(),l()})}l();var s=0,i=0,f=0,u=0;function d(n){if(!a&&e)switch(n){case"ArrowUp":var r=m();k(r)?(t=r,h(),g()):L(),l();break;case"ArrowDown":var o=p();k(o)?(t=o,h(),g()):L(),l();break;case"ArrowLeft":var c=w();k(c)?(t=c,h(),g()):L(),l();break;case"ArrowRight":var s=b();k(s)?(t=s,h(),g()):L(),l()}}function h(){for(var n=+t[0][0],r=0;r<t.length;r++)for(var e=0;e<t[r].length;e++)n<+t[r][e]&&(n=+t[r][e]);(c=n)>=2048&&(a=!0,o=!0)}function v(){t=[["","","",""],["","","",""],["","","",""],["","","",""]]}function g(){for(var n=[],r=0;r<t.length;r++)for(var e=0;e<t[0].length;e++)""===t[r][e]&&n.push({x:r,y:e});if(0===n.length){a=!0;return}var o=Math.floor(Math.random()*n.length);t[n[o].x][n[o].y]=Math.floor(11*Math.random())>9?4:2}function m(){r=!0;for(var n=A(),t=0;t<n.length;t++){for(var e=[],a=0;a<n.length;a++)e.push(n[a][t]);e=y(e);for(var o=0;o<n.length;o++)n[o][t]="";for(var c=0;c<e.length;c++)n[c][t]=e[c]}return n}function p(){r=!0;for(var n=A(),t=0;t<n.length;t++){for(var e=[],a=0;a<n.length;a++)e.push(n[a][t]);e=y(e).reverse();for(var o=0;o<n.length;o++)n[o][t]="";for(var c=n.length-1,l=0;l<e.length;l++,c--)n[c][t]=e[l]}return n}function w(){r=!0;for(var n=A(),t=0;t<n.length;t++)!function(t){var r=y(n[t]);n[t].forEach(function(n,t,r){return r[t]=""});for(var e=0;e<r.length;e++)n[t][e]=r[e]}(t);return n}function b(){r=!0;for(var n=A(),t=0;t<n.length;t++)!function(t){var r=y(n[t]).reverse();n[t].forEach(function(n,t,r){return r[t]=""});for(var e=0,a=n.length-1;e<r.length;e++,a--)n[t][a]=r[e]}(t);return n}function y(n){for(var t=n.filter(function(n){return""!==n}),r=1;r<t.length;r++)t[r]===t[r-1]&&(t[r-1]=t[r]+t[r],t[r]="");return t.filter(function(n){return""!==n})}function A(){for(var n=[["","","",""],["","","",""],["","","",""],["","","",""]],r=0;r<t.length;r++)for(var e=0;e<t[r].length;e++)n[r][e]=t[r][e];return n}function k(n){for(var r=0;r<t.length;r++)for(var e=0;e<t[r].length;e++)if(t[r][e]!==n[r][e])return!0;return!1}function L(){var n=k(w()),t=k(b()),r=k(m()),e=k(p());n||t||r||e||(a=!0,o=!1)}document.addEventListener("touchstart",function(n){var t=n.touches[0];s=t.clientX,i=t.clientY}),document.addEventListener("touchend",function(n){var t,r,e=n.changedTouches[0];f=e.clientX,u=e.clientY,Math.abs(t=f-s)>Math.abs(r=u-i)?t>30?d("ArrowRight"):t<-30&&d("ArrowLeft"):r>30?d("ArrowDown"):r<-30&&d("ArrowUp")}),document.addEventListener("keydown",function(n){d(n.key)});
//# sourceMappingURL=index.ec962c63.js.map
